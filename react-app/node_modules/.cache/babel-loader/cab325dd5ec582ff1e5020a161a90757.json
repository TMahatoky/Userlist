{"ast":null,"code":"import ValidationError from '../ValidationError';\nimport { once } from './async';\nexport default function runTests(options, cb) {\n  var endEarly = options.endEarly,\n      tests = options.tests,\n      args = options.args,\n      value = options.value,\n      errors = options.errors,\n      sort = options.sort,\n      path = options.path;\n  var callback = once(cb);\n  var count = tests.length;\n  var nestedErrors = [];\n  errors = errors ? errors : [];\n  if (!count) return errors.length ? callback(new ValidationError(errors, value, path)) : callback(null, value);\n\n  for (var i = 0; i < tests.length; i++) {\n    var test = tests[i];\n    test(args, function finishTestRun(err) {\n      if (err) {\n        // always return early for non validation errors\n        if (!ValidationError.isError(err)) {\n          return callback(err);\n        }\n\n        if (endEarly) {\n          err.value = value;\n          return callback(err);\n        }\n\n        nestedErrors.push(err);\n      }\n\n      if (--count <= 0) {\n        if (nestedErrors.length) {\n          if (sort) nestedErrors.sort(sort); //show parent errors after the nested ones: name.first, name\n\n          if (errors.length) nestedErrors.push.apply(nestedErrors, errors);\n          errors = nestedErrors;\n        }\n\n        if (errors.length) {\n          callback(new ValidationError(errors, value, path));\n          return;\n        }\n\n        callback(null, value);\n      }\n    });\n  }\n}","map":{"version":3,"names":["ValidationError","once","runTests","options","cb","endEarly","tests","args","value","errors","sort","path","callback","count","length","nestedErrors","i","test","finishTestRun","err","isError","push","apply"],"sources":["C:/Users/User/node_modules/yup/es/util/runTests.js"],"sourcesContent":["import ValidationError from '../ValidationError';\nimport { once } from './async';\nexport default function runTests(options, cb) {\n  var endEarly = options.endEarly,\n      tests = options.tests,\n      args = options.args,\n      value = options.value,\n      errors = options.errors,\n      sort = options.sort,\n      path = options.path;\n  var callback = once(cb);\n  var count = tests.length;\n  var nestedErrors = [];\n  errors = errors ? errors : [];\n  if (!count) return errors.length ? callback(new ValidationError(errors, value, path)) : callback(null, value);\n\n  for (var i = 0; i < tests.length; i++) {\n    var test = tests[i];\n    test(args, function finishTestRun(err) {\n      if (err) {\n        // always return early for non validation errors\n        if (!ValidationError.isError(err)) {\n          return callback(err);\n        }\n\n        if (endEarly) {\n          err.value = value;\n          return callback(err);\n        }\n\n        nestedErrors.push(err);\n      }\n\n      if (--count <= 0) {\n        if (nestedErrors.length) {\n          if (sort) nestedErrors.sort(sort); //show parent errors after the nested ones: name.first, name\n\n          if (errors.length) nestedErrors.push.apply(nestedErrors, errors);\n          errors = nestedErrors;\n        }\n\n        if (errors.length) {\n          callback(new ValidationError(errors, value, path));\n          return;\n        }\n\n        callback(null, value);\n      }\n    });\n  }\n}"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,oBAA5B;AACA,SAASC,IAAT,QAAqB,SAArB;AACA,eAAe,SAASC,QAAT,CAAkBC,OAAlB,EAA2BC,EAA3B,EAA+B;EAC5C,IAAIC,QAAQ,GAAGF,OAAO,CAACE,QAAvB;EAAA,IACIC,KAAK,GAAGH,OAAO,CAACG,KADpB;EAAA,IAEIC,IAAI,GAAGJ,OAAO,CAACI,IAFnB;EAAA,IAGIC,KAAK,GAAGL,OAAO,CAACK,KAHpB;EAAA,IAIIC,MAAM,GAAGN,OAAO,CAACM,MAJrB;EAAA,IAKIC,IAAI,GAAGP,OAAO,CAACO,IALnB;EAAA,IAMIC,IAAI,GAAGR,OAAO,CAACQ,IANnB;EAOA,IAAIC,QAAQ,GAAGX,IAAI,CAACG,EAAD,CAAnB;EACA,IAAIS,KAAK,GAAGP,KAAK,CAACQ,MAAlB;EACA,IAAIC,YAAY,GAAG,EAAnB;EACAN,MAAM,GAAGA,MAAM,GAAGA,MAAH,GAAY,EAA3B;EACA,IAAI,CAACI,KAAL,EAAY,OAAOJ,MAAM,CAACK,MAAP,GAAgBF,QAAQ,CAAC,IAAIZ,eAAJ,CAAoBS,MAApB,EAA4BD,KAA5B,EAAmCG,IAAnC,CAAD,CAAxB,GAAqEC,QAAQ,CAAC,IAAD,EAAOJ,KAAP,CAApF;;EAEZ,KAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGV,KAAK,CAACQ,MAA1B,EAAkCE,CAAC,EAAnC,EAAuC;IACrC,IAAIC,IAAI,GAAGX,KAAK,CAACU,CAAD,CAAhB;IACAC,IAAI,CAACV,IAAD,EAAO,SAASW,aAAT,CAAuBC,GAAvB,EAA4B;MACrC,IAAIA,GAAJ,EAAS;QACP;QACA,IAAI,CAACnB,eAAe,CAACoB,OAAhB,CAAwBD,GAAxB,CAAL,EAAmC;UACjC,OAAOP,QAAQ,CAACO,GAAD,CAAf;QACD;;QAED,IAAId,QAAJ,EAAc;UACZc,GAAG,CAACX,KAAJ,GAAYA,KAAZ;UACA,OAAOI,QAAQ,CAACO,GAAD,CAAf;QACD;;QAEDJ,YAAY,CAACM,IAAb,CAAkBF,GAAlB;MACD;;MAED,IAAI,EAAEN,KAAF,IAAW,CAAf,EAAkB;QAChB,IAAIE,YAAY,CAACD,MAAjB,EAAyB;UACvB,IAAIJ,IAAJ,EAAUK,YAAY,CAACL,IAAb,CAAkBA,IAAlB,EADa,CACY;;UAEnC,IAAID,MAAM,CAACK,MAAX,EAAmBC,YAAY,CAACM,IAAb,CAAkBC,KAAlB,CAAwBP,YAAxB,EAAsCN,MAAtC;UACnBA,MAAM,GAAGM,YAAT;QACD;;QAED,IAAIN,MAAM,CAACK,MAAX,EAAmB;UACjBF,QAAQ,CAAC,IAAIZ,eAAJ,CAAoBS,MAApB,EAA4BD,KAA5B,EAAmCG,IAAnC,CAAD,CAAR;UACA;QACD;;QAEDC,QAAQ,CAAC,IAAD,EAAOJ,KAAP,CAAR;MACD;IACF,CA9BG,CAAJ;EA+BD;AACF"},"metadata":{},"sourceType":"module"}