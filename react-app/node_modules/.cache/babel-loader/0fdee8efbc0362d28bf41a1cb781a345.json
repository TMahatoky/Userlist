{"ast":null,"code":"import has from \"lodash-es/has\";\nimport toposort from 'toposort';\nimport { split } from 'property-expr';\nimport Ref from '../Reference';\nimport isSchema from './isSchema';\nexport default function sortFields(fields, excludes) {\n  if (excludes === void 0) {\n    excludes = [];\n  }\n\n  var edges = [];\n  var nodes = [];\n\n  function addNode(depPath, key) {\n    var node = split(depPath)[0];\n    if (!~nodes.indexOf(node)) nodes.push(node);\n    if (!~excludes.indexOf(key + \"-\" + node)) edges.push([key, node]);\n  }\n\n  var _loop = function _loop(key) {\n    if (has(fields, key)) {\n      var value = fields[key];\n      if (!~nodes.indexOf(key)) nodes.push(key);\n      if (Ref.isRef(value) && value.isSibling) addNode(value.path, key);else if (isSchema(value) && value._deps) value._deps.forEach(function (path) {\n        return addNode(path, key);\n      });\n    }\n  };\n\n  for (var key in fields) {\n    _loop(key);\n  }\n\n  return toposort.array(nodes, edges).reverse();\n}","map":{"version":3,"names":["has","toposort","split","Ref","isSchema","sortFields","fields","excludes","edges","nodes","addNode","depPath","key","node","indexOf","push","_loop","value","isRef","isSibling","path","_deps","forEach","array","reverse"],"sources":["C:/Users/User/node_modules/yup/es/util/sortFields.js"],"sourcesContent":["import has from \"lodash-es/has\";\nimport toposort from 'toposort';\nimport { split } from 'property-expr';\nimport Ref from '../Reference';\nimport isSchema from './isSchema';\nexport default function sortFields(fields, excludes) {\n  if (excludes === void 0) {\n    excludes = [];\n  }\n\n  var edges = [];\n  var nodes = [];\n\n  function addNode(depPath, key) {\n    var node = split(depPath)[0];\n    if (!~nodes.indexOf(node)) nodes.push(node);\n    if (!~excludes.indexOf(key + \"-\" + node)) edges.push([key, node]);\n  }\n\n  var _loop = function _loop(key) {\n    if (has(fields, key)) {\n      var value = fields[key];\n      if (!~nodes.indexOf(key)) nodes.push(key);\n      if (Ref.isRef(value) && value.isSibling) addNode(value.path, key);else if (isSchema(value) && value._deps) value._deps.forEach(function (path) {\n        return addNode(path, key);\n      });\n    }\n  };\n\n  for (var key in fields) {\n    _loop(key);\n  }\n\n  return toposort.array(nodes, edges).reverse();\n}"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,eAAhB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,SAASC,KAAT,QAAsB,eAAtB;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,eAAe,SAASC,UAAT,CAAoBC,MAApB,EAA4BC,QAA5B,EAAsC;EACnD,IAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;IACvBA,QAAQ,GAAG,EAAX;EACD;;EAED,IAAIC,KAAK,GAAG,EAAZ;EACA,IAAIC,KAAK,GAAG,EAAZ;;EAEA,SAASC,OAAT,CAAiBC,OAAjB,EAA0BC,GAA1B,EAA+B;IAC7B,IAAIC,IAAI,GAAGX,KAAK,CAACS,OAAD,CAAL,CAAe,CAAf,CAAX;IACA,IAAI,CAAC,CAACF,KAAK,CAACK,OAAN,CAAcD,IAAd,CAAN,EAA2BJ,KAAK,CAACM,IAAN,CAAWF,IAAX;IAC3B,IAAI,CAAC,CAACN,QAAQ,CAACO,OAAT,CAAiBF,GAAG,GAAG,GAAN,GAAYC,IAA7B,CAAN,EAA0CL,KAAK,CAACO,IAAN,CAAW,CAACH,GAAD,EAAMC,IAAN,CAAX;EAC3C;;EAED,IAAIG,KAAK,GAAG,SAASA,KAAT,CAAeJ,GAAf,EAAoB;IAC9B,IAAIZ,GAAG,CAACM,MAAD,EAASM,GAAT,CAAP,EAAsB;MACpB,IAAIK,KAAK,GAAGX,MAAM,CAACM,GAAD,CAAlB;MACA,IAAI,CAAC,CAACH,KAAK,CAACK,OAAN,CAAcF,GAAd,CAAN,EAA0BH,KAAK,CAACM,IAAN,CAAWH,GAAX;MAC1B,IAAIT,GAAG,CAACe,KAAJ,CAAUD,KAAV,KAAoBA,KAAK,CAACE,SAA9B,EAAyCT,OAAO,CAACO,KAAK,CAACG,IAAP,EAAaR,GAAb,CAAP,CAAzC,KAAuE,IAAIR,QAAQ,CAACa,KAAD,CAAR,IAAmBA,KAAK,CAACI,KAA7B,EAAoCJ,KAAK,CAACI,KAAN,CAAYC,OAAZ,CAAoB,UAAUF,IAAV,EAAgB;QAC7I,OAAOV,OAAO,CAACU,IAAD,EAAOR,GAAP,CAAd;MACD,CAF0G;IAG5G;EACF,CARD;;EAUA,KAAK,IAAIA,GAAT,IAAgBN,MAAhB,EAAwB;IACtBU,KAAK,CAACJ,GAAD,CAAL;EACD;;EAED,OAAOX,QAAQ,CAACsB,KAAT,CAAed,KAAf,EAAsBD,KAAtB,EAA6BgB,OAA7B,EAAP;AACD"},"metadata":{},"sourceType":"module"}